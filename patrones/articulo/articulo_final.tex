\documentclass[10pt,letterpaper,onecolumn]{article}
\usepackage[latin1]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{cite}

\title{\textbf{Aprendizaje de reglas de operación para el mercado accionario mexicano}}
\author{David Ricardo Montalván Hernández}
\date{}

\begin{document}
\maketitle	
\begin{abstract}
Con la digitalización de los mercados financieros, particularmente del mercado accionario, el desarrollo de algoritmos y técnicas computacionales para la determinación y ejecución de órdenes de compra o venta de títulos financieros ha ganado relevancia tanto en la academia como en la industria.
En este artículo se explora el uso de técnicas computacionales relacionadas al área de reconocimiento de patrones, con el propósito de obtener estrategias de inversión para el mercado accionario mexicano.
\end{abstract}

\section{Introducción}	

El aumento en el poder de cómputo, la digitalización de los mercados financieros y la posibilidad de obtener grandes ganancias, han motivado en gran medida a la investigación y el desarrollo de algoritmos computacionales cuyo fin es guiar al inversionista en la toma de decisiones de compra o venta de títulos financieros (en particular acciones).

A pesar de que la idea básica es: "comprar barato hoy para vender a un precio mayor en el futuro", dada la incertidumbre de los mercados, esta investigación se ha auxiliado de herramientas matemáticas y computacionales  para la generación de modelos que auxilien en la toma de decisiones (cuando comprar y cuando vender). Particularmente, se ha dado énfasis en el uso de técnicas relacionadas a la inteligencia artificial.

El objetivo de este trabajo consiste en proponer un método o algoritmo para aprender de forma automática reglas para operar en el mercado accionario mexicano.

Particularmente, se buscan reglas de operación que generen ganancias (pérdidas) superiores (menores) a las generadas por la \textbf{hipótesis del mercado eficiente} la cual se discutirá en la sección 3 y básicamente consiste en lo siguiente:

\begin{itemize}
	\item Fijar un periodo de tiempo $[0,T]$.
	\item Comprar en el inicio del periodo a un precio $P_{0}$.
	\item Vender en el final del periodo a un precio $P_{T}$.
	\item La ganancia (pérdida) porcentual es $\dfrac{P_{T}-P_{0}}{P_{0}}$
\end{itemize}

Este trabajo busca también comparar el desempeño de distintas metodologías relacionadas al reconocimiento de patrones cuando se aplican al proceso de detectar señales de compra o venta de acciones.

Finalmente, la aportación de este trabajo es el análisis del mercado accionario mexicano, desde una perspectiva del área de reconocimiento de patrones.

%\begin{itemize}
%	\item Motivación (justificación).
%	\item Problema a resolver.
%	\item Objetivo general.
%	\item Objetivos específicos
%	\item Aportaciones
%\end{itemize}

\section{Estado del arte}
%Incluir una tabla comparativa

\section{Fundamentos}

\subsection{Análisis técnico}
De acuerdo a \cite{tabook}, en su forma básica, el análisis técnico es el estudio de los precios y volúmenes históricos de las acciones con la intención de tomar decisiones de inversión que generen ganancias. Los supuestos básicos de este tipo de análisis son los siguientes:

\begin{itemize}
	\item Los precios están determinados únicamente por la interacción de la oferta y la demanda.
	\item Los precios tienden a moverse siguiendo una tendencia.
	\item Cambios en la oferta y la demanda provocan reversiones en las tendencias.
	\item Cambios en la oferta y la demanda pueden detectarse utilizando gráficas.
	\item Los patrones en las gráficas tienden a repetirse.
\end{itemize}

El análisis técnico hace el supuesto de que la información de todos los factores (incluyendo factores psicológicos como la avaricia, miedo, mal información, etc...) que afectan las curvas de oferta y demanda, está reflejada en el precio de la acción de la compañía.

El análisis técnico utiliza las siguiente herramientas para el análisis de los mercados accionarios:

\subsubsection{Indicadores técnicos}
Los indicadores técnicos son series de tiempo derivadas de las series del precio o volumen de una acción. Estos indicadores interactúan con otros indicadores o con el precio/volumen con el que fueron calculados generando señales de compra o venta de acuerdo a reglas específicas.

Entre los indicadores más conocidos se encuentran \cite{ta-patternbook}:

\subsubsection{Promedios móviles simples (Simple Moving Average)}

Este indicador se calcula como un promedio de los precios más recientes. Su fórmula es

$$MA_{t:w} = \dfrac{P_{t} + P_{t-1} + \ldots + P_{t-w-1}  }  {w} $$

en donde 
\begin{itemize}
	\item $MA_{t:w} = $ Promedio móvil simple en el momento $t$ para una ventana de $w$ periodos más recientes.
	\item $P_{t} = $ Precio (cierre, apertura, mínimo, máximo, etc...) de la acción en el momento $t$.
	\item $w = $ Ventana de tiempo utilizada (meses, días, horas, minutos)
\end{itemize}

Utilizando este indicador, es posible obtener la siguiente regla:

$$ \begin{array}{ccc}
	P_{t}>MA_{t:w} & \wedge & P_{t-1}<MA_{t-1:w} \implies Compra \\
	P_{t}<MA_{t:w} & \wedge & P_{t-1}>MA_{t-1:w} \implies Venta
	\end{array}
$$

\begin{figure}
	\centering
	\includegraphics[width=1.0\linewidth]{../imagenes_articulo/MA_ejemplo}
	\caption{Señales generadas por un indicador de promedio móviles.}
	\label{fig:maejemplo}
\end{figure}

\subsubsection{Intersección de promedios móviles (Moving Averages Crossover)}

Este indicador se calcula con la diferencia de dos promedio móviles.

$$MAC_{t:w_{S} w_{L} } = MA_{t:w_{S}} - MA_{t : w_{L} }   $$

en donde:

\begin{itemize}
	
	\item $MAC_{t: w_{S} w_{L} } = $ Intersección de promedios móviles en el momento $t$ para las ventanas de tiempo $w_{S} < w_{L}$.
	
	\item $MA_{t:w} = $ Promedio móvil simple en el momento $t$ para una ventana de $w$ periodos más recientes.
	
\end{itemize}

La regla generada por este indicador es la siguiente:

$$ \begin{array}{ccc}
MAC_{t: w_{S}  w_{L} }>0 & \wedge & MAC_{t-1: w_{S}  w_{L } }<0 \implies Compra \\
MAC_{t: w_{S}  w_{L} }<0 & \wedge & MAC_{t-1: w_{S}  w_{L } }>0 \implies Venta
\end{array}
$$

\begin{figure}
	\centering
	\includegraphics[width=1.0\linewidth]{../imagenes_articulo/MAC_ejemplo}
	\caption{Señales generadas por un indicador de intersección de promedios móviles}
	\label{fig:macejemplo}
\end{figure}

\subsubsection{Bandas de Bollinger (Bollinger Bands)}


Este indicador consiste en "envolver" al precio $P_{t}$ en dos bandas (superior e inferior) calculadas de la siguiente manera:

$$
	\begin{array}{ccccc}
		Superior_{t:w,k} & = & BB_{t:w,k}^{up} & = & MA_{t:w} + k \sigma_{t:w}\\
		Inferior_{t:w,k} & = & BB_{t:w,k}^{low} & = & MA_{t:w} - k \sigma_{t:w}
	\end{array}
$$

en donde:

\begin{itemize}
	\item $MA_{t:w} = $ Promedio móvil simple en el momento $t$ para una ventana de $w$ periodos más recientes.
	\item $\sigma_{t:w} = $ Desviación estándar de los precios, utilizando los $w$ datos más recientes.
\end{itemize}

la regla para este indicador es la siguiente

$$
	\begin{array}{cccc}
	
		\left(P_{t} > BB_{t:w,k}^{up} \wedge P_{t-1} > BB_{t-1:w,k}^{up} \right) & \vee & \left(P_{t} > BB_{t:w,k}^{low} \wedge P_{t-1} < BB_{t-1:w,k}^{low} \right) & \implies Compra \\
		
		\left(P_{t} < BB_{t:w,k}^{low} \wedge P_{t-1} < BB_{t-1:w,k}^{low} \right) & \vee & \left(P_{t} < BB_{t:w,k}^{up} \wedge P_{t-1} > BB_{t-1:w,k}^{up} \right) & \implies Vende
		
	\end{array}
$$

\begin{figure}
	\centering
	\includegraphics[width=1.0\linewidth]{../imagenes_articulo/bollinger_ejemplo}
	\caption{Señales generadas por un indicador de bandas de Bollinger}
	\label{fig:bollingerejemplo}
\end{figure}

\subsubsection{Retos del análisis técnico}
Algunas de las dificultades al utilizar las herramientas del análisis técnico son las siguientes:

\begin{itemize}
	\item ¿Qué conjunto de indicadores utilizar?
	\item ¿Con que parámetros utilizar cada uno de ellos?
	\item ¿Que criterio(s) utilizar cuando no hay un acuerdo en las señales generadas por sus reglas correspondientes?
\end{itemize}



\subsection{Hipótesis del mercado eficiente (HME)}
Esta hipótesis, propuesta por Eugene Fama en los años 60's, nos dice que los cambios observados en los precios son provocados únicamente por la nueva información disponible, es decir, la información histórica (de cualquier tipo) no tiene importancia al momento de  determinar los precios del futuro, en particular, el análisis técnico no nos permite estimar las tendencias del futuro.

Existen tres versiones de la HME:
\subsubsection{Versión débil de la HME}
En su versión débil, la hipótesis del mercado eficiente nos dice que los precios del pasado no afectan los movimientos del futuro, en consecuencia, el análisis técnico es fútil para generar estrategias de inversión.
Es importante señalar que esta versión sólo hace referencia a los precios históricos, dejando abierta la posibilidad de utilizar información de otro tipo, por ejemplo estados financieros de las compañías o noticias relacionadas a ella, para predecir los precios futuros.

\subsubsection{Versión semi-fuerte de la HME}
En su versión semi-fuerte, la hipótesis del mercado eficiente nos dice que la información pública histórica (precios, estados financieros, noticias, etc...) no es de utilidad alguna al momento de predecir los movimientos del futuro. En consecuencia, sólo la información privilegiada (aquella que sólo unas cuantas personas poseen) podría ser de utilidad para predecir los movimientos del futuro.

\subsubsection{Versión fuerte de la HME}
En su versión fuerte, la hipótesis del mercado eficiente nos dice que tanto la información pública como la privilegiada no nos permiten obtener pronosticar los movimientos del mercado.

\begin{figure}
	\centering
	\includegraphics[width=0.7\linewidth]{../imagenes_articulo/EMH}
	\caption{Versiones de la hipótesis del mercado eficiente}
	\label{fig:HME}
\end{figure}

\subsection{Estrategia Buy and Hold (BH)}
Esta estrategia de inversión es la estrategia sugerida por la hipótesis del mercado eficiente y consiste en lo siguiente:

\begin{itemize}
	\item Fijar un periodo de tiempo $[0,T]$.
	\item Comprar en el inicio del periodo a un precio $P_{0}$.
	\item Vender en el final del periodo a un precio $P_{T}$.
	\item La ganancia (pérdida) porcentual es $\dfrac{P_{T}-P_{0}}{P_{0}}$
\end{itemize}

de acuerdo a la HME, la ganancia (pérdida) obtenida por la estrategia BH es la máxima (mínima) ganancia (pérdida) que se puede obtener de manera sistemática. Por lo tanto, esta estrategia será utilizada como marco de referencia al momento de compara las estrategias de inversión derivadas por los algoritmos propuestos.

\begin{figure}
	\centering
	\includegraphics[width=0.9\linewidth]{../imagenes_articulo/estrategia_BH}
	\caption{Estrategia Buy and Hold}
	\label{fig:BH}
\end{figure}

\subsection{Títulos referenciados a acciones}
De acuerdo al sitio de la Bolsa Mexicana de Valores \footnote{https://www.bmv.com.mx/es/mercados/instrumentos}, el mercado mexicano cuenta con Títulos Referenciados a Acciones (TRACS), los cuales son certificados de participación que representan el patrimonio de fideicomisos de inversión y que mantienen en posición canastas de acciones de empresas cotizadas en bolsa además de una componente en efectivos. El objetivo principal de los TRACs, es replicar el comportamiento de las acciones al que está referido.

Es de principal importancia el TRAC llamado NAFTRAC el cual está referenciado al \textbf{Índice de Precios y Cotizaciones} (IPC), índice que busca reflejar el mercado accionario mexicano en su totalidad.

Buscamos entonces, estrategias que generen mejores rendimientos que aquellos generados por el NAFTRAC siguiendo la estrategia Buy and Hold.


\section{Experimentos y resultados}

\subsection{Conjunto de datos}

%Explicar etiquetamiento de datos, training data y test data
%Interpretación de las reglas (cuando sea posible)
%Tabla con ganancia del método vs B&H


\section{Conclusiones y trabajo futuro}
%Trabajo futuro: Considerar medidas de riesgo
%Métodos simbólicos

\bibliography{referencias_articulo}{}
\bibliographystyle{apalike}


\end{document}